## Навчальний гайд по проєкту

Цей файл — простий навчальний курс по проєкту. Він пояснює:

- **що це за проєкт і яка в нього структура**
- **які технології використовуються (Astro, React, Tailwind, Sanity, shadcn, Radix, FontAwesome, тощо)**
- **як усе це працює разом**
- **як самостійно запустити проєкт і Sanity Studio**
- **які потрібні змінні оточення, токени та де їх указувати**

Читай цей файл послідовно — цього має вистачити, щоб орієнтуватися в коді.

---

## 1. Загальна структура репозиторію

У корені ти бачиш папку:

- **`verdant-venus/`** — це основний фронтенд‑проєкт на Astro.
- **`verdant-venus/test/`** — це окремий підпроєкт Sanity Studio (адмінка / CMS, де редагується контент).

Нас далі найбільше цікавлять саме ці дві частини.

### 1.1. Структура `verdant-venus/`

Основні файли та папки:

- **`package.json`**  
  - Описує проєкт, його назву, версію, залежності та скрипти.
  - Найважливіші скрипти:
    - **`npm run dev`** — запускає Astro у dev‑режимі.
    - **`npm run build`** — збирає продакшн‑білд.
    - **`npm run preview`** — показує зібраний білд локально.

- **`astro.config.mjs`**  
  - Головний конфіг Astro.
  - Підключає інтеграції:
    - **`@astrojs/react`** — дозволяє використовувати React‑компоненти в Astro.
    - **`@sanity/astro`** — інтеграція з Sanity CMS.
    - **`@tailwindcss/vite`** — підключення Tailwind через Vite.
  - Тут же налаштовуються:
    - **`projectId`** та **`dataset`** для Sanity (через змінні оточення або дефолтні значення).
    - **`studioBasePath: "/studio"`** — шлях, за яким доступна вбудована версія Sanity Studio в Astro.

- **`components.json`**  
  - Конфіг для **shadcn** та його реєстрів.
  - Описує:
    - стиль (`"style": "new-york"`),
    - де лежать компоненти (`aliases`),
    - які **регістри** (джерела готових компонентів) використовуються:
      - **`@shadcnblocks`** — потрібен API‑ключ `SHADCNBLOCKS_API_KEY`;
      - **`@shadcn-studio`** — ще один реєстр компонентів.

- **`src/`** — основний код фронтенду.
  - **`src/pages/`**
    - **`index.astro`** — головна сторінка сайту. Тут збираються секції/блоки з `src/components`.
  - **`src/components/`**
    - Багато реакт‑компонентів блоків сторінки:
      - `hero-block.tsx`, `features-slider-block.tsx`, `faq-block.tsx`, `footer3.tsx`, тощо.
    - **`components/ui/`** — дрібні, універсальні UI‑елементи (кнопки, картки, тултіп, таби...), головним чином на базі **shadcn + Radix UI**.
    - **`components/shadcnblocks/`** — компоненти з shadcnblocks.
  - **`src/lib/`**
    - **`sanityClient.ts`** — клієнти для читання даних із Sanity (звичайний та preview).
    - **`utils.ts`**, `fontawesome-icons.tsx` — утиліти, іконки тощо.
  - **`src/styles/global.css`**
    - Глобальні стилі проєкту (працюють разом із Tailwind).
  - **`src/env.d.ts`**
    - Типи для змінних оточення в Astro/Sanity.

- **`.npmrc`**
  - Налаштування приватного реєстру **FontAwesome**.
  - Дає доступ до приватних іконок (через токен реєстру). Зазвичай такий токен **не заливають у GitHub** для безпеки, але локально він є, щоб `npm install` міг затягнути приватні пакети.

### 1.2. Структура `verdant-venus/test/` (Sanity Studio)

Це окремий Node‑проєкт зі своїм `package.json`:

- **`test/package.json`**
  - Скрипти:
    - **`npm run dev` / `sanity dev`** — локальний запуск Sanity Studio.
    - **`npm run build` / `sanity build`** — збірка Studio.
    - **`npm run deploy` / `sanity deploy`** — деплой Studio (на хостінг Sanity).
  - Залежить від:
    - **`sanity`** — ядро CMS.
    - **`@sanity/vision`** — інструмент для тестування GROQ‑запитів.

- **`test/sanity.config.ts`**
  - Конфіг Sanity Studio:
    - **`projectId: "l7n0o2d0"`** і **`dataset: "production"`** — ідентифікатори проєкту в Sanity.
    - Підключення плагінів **`structureTool()`** (структура контенту) та **`visionTool()`** (GROQ).
    - Підключення `schemaTypes` — схеми контенту (наприклад, `landingPage`).

- **`test/schemaTypes/`**
  - Описує типи документів у Sanity (які поля є на лендингу тощо).

---

## 2. Який стек використовується

### 2.1. Astro

- **Astro** — це фреймворк для створення швидких сайтів, який:
  - генерує багато HTML на сервері або під час білду;
  - дозволяє вбудовувати «острівці» на React (або інші фреймворки) тільки там, де потрібна взаємодія.
- У цьому проєкті Astro:
  - відповідає за **маршрутизацію** (через файли в `src/pages`),
  - збирає сторінки з React‑блоків,
  - інтегрується із **Sanity** для отримання контенту.

Простими словами: **Astro керує сторінками і версткою, а React‑компоненти — це «розумні блоки» всередині цих сторінок.**

### 2.2. React

- React використовується для компонентів у `src/components`.
- Завдяки інтеграції `@astrojs/react`:
  - ти можеш писати `.tsx`‑компоненти як у класичному React/Next.js,
  - але рендеряться вони в контексті Astro‑сторінки.

### 2.3. Tailwind CSS

- **Tailwind CSS** — utility‑first CSS‑фреймворк.
- Замість написання класичних CSS, ти додаєш утилітні класи прямо в `className`, наприклад:
  - `flex`, `items-center`, `bg-black`, `text-white`, `rounded-xl` тощо.
- У нас Tailwind підключений через:
  - **`@tailwindcss/vite`** у `astro.config.mjs`;
  - глобальні стилі й tailwind‑директиви живуть у `src/styles/global.css`.

Простими словами: **Tailwind дозволяє дуже швидко верстати інтерфейс, комбінуючи готові CSS‑класи.**

### 2.4. Sanity (Headless CMS)

- **Sanity** — це headless CMS:
  - контент (тексти, зображення, блоки лендинга) зберігається в хмарному Sanity‑проєкті;
  - редактори/маркетологи змінюють контент через **Sanity Studio** (веб‑адмінка);
  - фронтенд (наш Astro‑сайт) забирає дані через **Sanity API**.

- У цьому проєкті:
  - **Studio** живе в папці `test/` (окрема dev‑адмінка).
  - Astro підключається до того ж Sanity‑проєкту через:
    - **`@sanity/astro`** в `astro.config.mjs`;
    - **`sanityClient.ts`** у `src/lib`.

### 2.5. shadcn + Radix UI

- **shadcn/ui** — це набір готових, але при цьому «своїх» компонентів:
  - по суті, це бібліотека код‑сніпетів: ти генеруєш/копіюєш компонент у свій проєкт, а далі це **твой код**, який можна змінювати.
- **Radix UI** — низькорівневі, доступні (accessible) primitive‑компоненти (Accordion, Tooltip, Tabs, NavigationMenu, тощо), на яких побудовані shadcn‑компоненти.
- У `package.json` ти бачиш купу `@radix-ui/react-*` залежностей — це окремі примітиви.

- У `components.json`:
  - підключені **регістри**:
    - **`@shadcnblocks`** (через API‑ключ),
    - **`@shadcn-studio`**.
  - Вони дозволяють тягнути готові блоки (наприклад, готові секції лендингу) замість верстати все з нуля.

Простими словами: **shadcn + Radix — це конструктор готових, добре пропрацьованих React‑компонентів, які ми стилізуємо Tailwind’ом.**

### 2.6. Next.js (в контексті цього проєкту)

- **Next.js безпосередньо тут не використовується** (у залежностях немає `next`).
- Проте:
  - **shadcn/ui** історично робився під Next.js, тому в інтернеті більшість прикладів прив’язані до Next.
  - Ми беремо звідти компоненти, але використовуємо їх **всередині Astro + React**, а не в Next.

Простими словами: **знайдеш у документації згадки про Next.js — не лякайся, у нашому проєкті роль "фреймворка навколо React" виконує Astro.**

### 2.7. Інші важливі залежності

- **FontAwesome** (`@awesome.me/*`, `@fortawesome/*`) — іконки, частина з них приватні (через `.npmrc`).
- **`embla-carousel-react`** — слайдер/карусель.
- **`framer-motion`** — анімації.
- **`lucide-react`** — набір іконок.
- **`styled-components`** — у проєкті є залежність, але основний стиль робиться Tailwind’ом; styled‑components можна зустріти в деяких частинах.

---

## 3. Як усе це працює разом

1. **Редагування контенту**
   - Контент лендингу описаний у **Sanity schema** (папка `test/schemaTypes`).
   - Редактор заходить у **Sanity Studio** (локально чи на проді), заповнює поля (заголовки, тексти, FAQ, картки тощо).
   - Ці дані зберігаються в Sanity (в проєкті з `projectId = "l7n0o2d0"`, `dataset = "production"`).

2. **Забір контенту на фронтенді**
   - Astro‑сторінка `src/pages/index.astro` (і, можливо, інші) імпортує React‑блоки та функції для читання даних із Sanity (через `sanityClient`).
   - `sanityClient` налаштований у `src/lib/sanityClient.ts`:
     - використовує `PUBLIC_SANITY_PROJECT_ID` і `PUBLIC_SANITY_DATASET`;
     - є окремий клієнт **preview** з токеном `SANITY_API_READ_TOKEN` для роботи з драфтами.

3. **Рендер сторінки**
   - Astro обробляє запит до `/` → виконує код у `index.astro`.
   - Дані з Sanity підставляються в компоненти (`hero-block`, `features-*`, `faq-block`, `footer3`, тощо).
   - UI‑компоненти (кнопки, картки, акордеон) використовують **shadcn + Radix + Tailwind**.

4. **Роль змінних оточення**
   - Якщо **нема змінних оточення**, `sanityClient` і `astro.config.mjs` підставлять **дефолтні значення**:
     - `PUBLIC_SANITY_PROJECT_ID` → `"l7n0o2d0"`,
     - `PUBLIC_SANITY_DATASET` → `"production"`.
   - Проте для:
     - **preview‑режиму** потрібен `SANITY_API_READ_TOKEN`;
     - роботи деяких інструментів shadcn потрібен `SHADCNBLOCKS_API_KEY`;
     - приватних іконок FontAwesome потрібен токен у `.npmrc`.

---

## 4. Як запустити фронтенд (Astro)

### 4.1. Клон репозиторію

```bash
git clone <URL_РЕПОЗИТОРІЮ>
cd astro-sanity-landing/verdant-venus
```

> Якщо ти вже в папці `verdant-venus`, цей крок можна пропустити.

### 4.2. Встановити залежності

```bash
npm install
```

> Переконайся, що в тебе встановлений **Node.js** версії не нижче 18 (краще остання LTS).

### 4.3. Запуск dev‑сервера

```bash
npm run dev
```

Зазвичай Astro:

- запускається на `http://localhost:4321` (або покаже точну URL у консолі);
- ти побачиш головну сторінку, зібрану з компонентів у `src/components`.

### 4.4. Збірка та прев’ю білду (за потреби)

- **Зібрати білд**:

```bash
npm run build
```

- **Подивитися білд локально**:

```bash
npm run preview
```

---

## 5. Як запустити Sanity Studio (папка `test/`)

Sanity Studio — це адмінка, де редагується контент.

### 5.1. Перейти в папку `test/` та встановити залежності

```bash
cd astro-sanity-landing/verdant-venus/test
npm install
```

### 5.2. Запустити Studio

```bash
npm run dev
```

- За замовчуванням Studio відкриється на `http://localhost:3333` (або покаже URL у терміналі).
- Тут ти зможеш:
  - переглядати документи типу `landingPage`;
  - редагувати тексти, картинки, списки тощо;
  - використовувати **Vision** для тестування GROQ‑запитів.

---

## 6. Змінні оточення, токени та секрети

Більшість секретів не зберігають у репозиторії, щоб їх не побачили сторонні люди (наприклад, якщо репо на GitHub). Натомість їх зберігають у `.env` файлах або в налаштуваннях CI/CD.

### 6.1. Де створювати `.env` файли

У нас є два окремі Node‑проєкти:

1. **Фронтенд (Astro)** — папка `verdant-venus/`.
2. **Sanity Studio** — папка `verdant-venus/test/`.

Зазвичай:

- Для Astro:
  - створюють файл **`verdant-venus/.env.local`** (або `.env`).
- Для Studio (при необхідності):
  - створюють файл **`verdant-venus/test/.env.local`**.

> **Важливо:** файли `.env`, `.env.local` **спеціально не додаються в GitHub** (вони в `.gitignore`).  
> Тому якщо ти клонуватимеш репозиторій з GitHub, ці файли **НЕ прийдуть разом з кодом**.  
> Тобі потрібно буде створити їх локально і заповнити значеннями, які дасть **Lead / тімлід**.

### 6.2. Змінні для Astro / Sanity клієнта

Подивимося на `src/lib/sanityClient.ts` та `astro.config.mjs`:

- Використовуються змінні:
  - **`PUBLIC_SANITY_PROJECT_ID`**
  - **`PUBLIC_SANITY_DATASET`**
  - **`SANITY_API_READ_TOKEN`** (для preview‑клієнта)

Приклад `verdant-venus/.env.local`:

```bash
PUBLIC_SANITY_PROJECT_ID=l7n0o2d0
PUBLIC_SANITY_DATASET=production

# Опційно, якщо потрібен доступ до драфтів / preview‑режиму:
SANITY_API_READ_TOKEN=<ТОКЕН_З_SANITY>
```

Пояснення:

- Префікс **`PUBLIC_`** означає, що змінна доступна і на клієнті (браузері), і на сервері.
- `SANITY_API_READ_TOKEN` **не має бути публічною**, тому її не можна віддавати в браузер; в нашому коді вона використовується у preview‑клієнті (серверна частина).

### 6.3. Токен для shadcnblocks (`SHADCNBLOCKS_API_KEY`)

У `components.json` є секція:

- реєстр **`@shadcnblocks`** має заголовок:

```json
"Authorization": "Bearer ${SHADCNBLOCKS_API_KEY}"
```

Це означає:

- Під час роботи CLI/скриптів, які тягнуть блоки з `shadcnblocks.com`, потрібен **API‑ключ**.
- Його зручно зберігати в `.env.local`:

```bash
SHADCNBLOCKS_API_KEY=<ТВІЙ_API_КЛЮЧ>
```

Як правило, цей ключ потрібен **тільки розробникам, які додають нові блоки**. Для простої розробки/запуску сайту без генерації нових блоків він часто не використовується.

### 6.4. Токени FontAwesome (.npmrc)

Файл `.npmrc` у корені `verdant-venus`:

- вказує, що пакети `@awesome.me` та `@fortawesome` беруться з приватного реєстру `npm.fontawesome.com`;
- містить **auth‑токен**, який дозволяє завантажувати приватні пакети.

У реальному публічному репозиторії:

- такий токен зазвичай **не кладуть у Git**;
- кожен розробник налаштовує `.npmrc` локально, або токен задають через змінні оточення CI.

> **Якщо ти клонуватимеш репозиторій з GitHub**, `.npmrc` або буде відсутній, або буде без реального токена.  
> Робочий токен для FontAwesome тобі має видати **Lead / відповідальна людина**, після чого ти:
> - або додаєш/оновлюєш токен у локальному `.npmrc`,
> - або використовуєш той спосіб, який узгоджений у команді (наприклад, глобальний `.npmrc`).

Якщо `.npmrc` немає або токен неправильний:

1. `npm install` може впасти з помилкою доступу до приватного реєстру.
2. У такому випадку **нічого не вигадуй сам**, а звернися до ліда чи DevOps, щоб отримати коректний токен або інструкцію.

---

## 7. Типові проблеми при запуску та як їх фіксити

- **Проблема:** `npm install` падає з помилкою авторизації до `npm.fontawesome.com`.  
  **Причина:** немає або неправильний токен FontAwesome у `.npmrc`.  
  **Що робити:** звернутися до ліда/адміна за правильним токеном або тимчасово видалити/замінити приватні пакети.

- **Проблема:** Astro показує попередження про `PUBLIC_SANITY_PROJECT_ID is not set`.  
  **Причина:** немає змінних у `.env.local`.  
  **Що робити:** додати `PUBLIC_SANITY_PROJECT_ID` і `PUBLIC_SANITY_DATASET` в `.env.local` (див. приклад вище) або прийняти дефолтні значення, якщо вони коректні.

- **Проблема:** не бачиш драфти/чернетки контенту з Sanity.  
  **Причина:** немає `SANITY_API_READ_TOKEN` або не налаштований preview‑режим.  
  **Що робити:** отримати read‑token в Sanity і додати в `.env.local`.

---

## 8. Що варто зробити джуну для кращого розуміння проєкту

1. **Запустити фронтенд і Studio одночасно**
   - Astro на `localhost:4321` (умовно) і Sanity Studio на `localhost:3333`.
   - Змінити якийсь текст у документі `landingPage` у Studio.
   - Перезавантажити фронтенд‑сторінку і побачити, як змінився контент.

2. **Почитати/порозбиратися в компонентах**
   - Взяти, наприклад, `hero-block.tsx` чи `features-slider-block.tsx` у `src/components`.
   - Зрозуміти, які пропси вони отримують, як використовують Tailwind‑класи.

3. **Погратися з Tailwind**
   - Змінити кілька класів (`bg-*`, `text-*`, `p-*`, `rounded-*`) і подивитися, як змінюється UI.

4. **Подивитися на shadcn/ui компоненти**
   - Відкрити `src/components/ui` та зрозуміти структуру типового компонента (наприклад, кнопки).
   - Порівняти з документацією shadcn/ui.

5. **Поставити питання тімліду**
   - Якщо щось незрозуміло в схемах Sanity (`schemaTypes`),
   - або в тому, як саме фронтенд мапить поля з Sanity на props компонентів.

---

Цей файл має бути твоєю «картою місцевості» по проєкту. Якщо після прочитання ще щось лишилось незрозумілим — найкраще сформулювати конкретні питання (з посиланням на файли/рядки коду) і принести їх на рев’ю чи мітинг.


